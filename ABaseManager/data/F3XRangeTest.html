<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=0.5>
  <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
  <link rel="icon" href="#" />
  <link rel="stylesheet" href="./styles.css">
  <script type="text/javascript" src="./script.js"></script>
  <title>F3X-Range-Test</title>
 </head>
 <body onload="">
  <div id="id_body">
   <div class="container">
    <div class="row">
     <div class="col-appname">Wireless B-Line Range Test:</div>
     <div class="col-version">Server-Local-Time: <span id="id_time">0</span></div>
     <div class="col-version">WiFi: <span id="id_wifi_rss">0</span>dB</div>
     <div class="col-version">Bat (A/B): <span id="id_bat">0.00/0.00</span>V</div>
     <div class="col-version">Radio (p/c/r/a): <span id="id_radio">_</span></div>
     <div class="col-version">Version: <span id="id_version">0.00</span></div>
    </div>
   </div>
   <div class="container">
     <!-- <div class="col-version">Round Trip: <span id="id_round_trip">0</span>ms</div> -->
    <h2>Range Test of wireless measurement equipment:</h2>
   </div>
   <div class="container">
    <div class="row">
     <div class="col-declaration-long">
      <label>Start Measurement:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_start_rt_measurement" name="start_rt_measurement" value="true"
      onclick="sendNameValue(this.name, this.value);">START RT</button>
     </div>
     <div class="col-text">
      <p> start measurment ...</p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio Round Trip Time:</label>
     </div>
     <div class="col-button">
      <label id="id_radio_roundtrip">_</label><label>ms</label>
     </div>
     <div class="col-text">
      <p> time measurement of packets from A-Line to B-Line and back</p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio packets loss :</label>
     </div>
     <div class="col-button">
      <label id="id_radio_packet_loss">_</label><label>%</label>
     </div>
     <div class="col-text">
      <p> packet loss in percent of the last seconds</p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio Packets missing:</label>
     </div>
     <div class="col-button">
      <label id="id_radio_missed_packets">_</label><label>#/#</label>
     </div>
     <div class="col-text">
      <p> packets counts missing in round trip</p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio power selection:</label>
     </div>
     <div class="col-button">
       <label for="lang">Radio power setting</label>
       <select name="radio_power" id="id_radio_power">
         <option value="min">Min</option>
         <option value="low">Low</option>
         <option value="high">High</option>
         <option value="max">Max</option>
       </select>
       <input type="button" onclick="sendSelectedValue('id_radio_power')" value="Use Radio Power">
     </div>
     <div class="col-text">
      <p> radio power level MIN:-12dBm, LOW:-4dBm, HIGH:1dBm, MAX:4dBm </p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio power selection:</label>
     </div>
     <div class="col-button">
       <label for="lang">Radio datarate setting</label>
       <select name="radio_datarate" id="id_radio_datarate">
         <option value="250">250</option>
         <option value="1000">1000</option>
         <option value="2000">2000</option>
       </select>
       <input type="button" onclick="sendSelectedValue('id_radio_datarate')" value="Use Radio Datarate">
     </div>
     <div class="col-text">
      <p> radio datarate level:  250k, 1M, 2M bit per second  </p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio packet acknlowledge selection:</label>
     </div>
     <div class="col-button">
       <label for="lang">Radio Packets Ack</label>
        <input type="checkbox" name="radio_ack" id="id_radio_ack">
        <button onclick="radio_enable_ack()">Enable Ack</button>
        <button onclick="radio_disable_ack()">Disable Ack</button>
     </div>
     <div class="col-text">
      <p> radio auto packets acknowlegde feature </p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Radio channel selection:</label>
     </div>
     <div class="col-button">
      <input type="number" id="id_radio_channel" name="radio_channel" min="0" max="125" value="125">
      <input type="button" onclick="sendSelectedValue('id_radio_channel')" value="Use Radio Channel">
     </div>
     <div class="col-text">
      <p> the radio equipment uses 2400 MHz + <channel number> as communication frequency </p>
     </div>
    </div>
    <hr>
    <div class="row">
     <div class="col-declaration-long">
      <label>Maintenance Restart MCs:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_restart_mc" name="restart_mc" value="true"
      onclick="sendNameValue(this.name, this.value);">Restart</button>
     </div>
     <div class="col-text">
      <p> restart the micro controller on A- and B-Line</p>
     </div>
    </div>

   </div>
   </div class="container">
   <br><br><a href="https://github.com/Pulsar07/F3XCompetition">Link to project page at GitHub</a>
  </div>
  
  <script>
   function radio_enable_ack() {
     var element = document.getElementById("id_radio_ack");
     element.checked = true;
     element.value = true;
     sendSelectedValue("id_radio_ack");
   }
   
   function radio_disable_ack() {
     var element = document.getElementById("id_radio_ack");
     element.checked = false;
     element.value = false;
     sendSelectedValue("id_radio_ack");
   }

   function sendSelectedValue(aId) {
     sendNameValue(
       document.getElementById(aId).name,
       document.getElementById(aId).value
       );
   }

   getData("initF3XRangeTest");
   setInterval(function() {
     // Call a function repetatively with 2 Second interval
     getData("pollF3XRangeTest");
   }, 1000); // 500mSeconds update rate

  var ourSendTime = 0;
  var ourDate = new Date();

  </script>
 </body>
</html>
