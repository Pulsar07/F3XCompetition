<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=0.5>
  <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
  <link rel="icon" href="#" />
  <link rel="stylesheet" href="./styles.css">
  <script type="text/javascript" src="./script.js"></script>
  <title>F3X-Competition</title>
 </head>
 <body onload="">
  <div id="id_body">
   <div class="container">
    <div class="row">
     <div class="col-appname">F3X-Competition:</div>
     <div class="col-version">Server-Local-Time: <span id="id_time">0</span></div>
     <div class="col-version">WiFi: <span id="id_wifi_rss">0</span>dB</div>
     <div class="col-version">Bat (A/B): <span id="id_bat">0.00/0.00</span>V</div>
     <div class="col-version">Radio (p/c/r/a): <span id="id_radio">_</span></div>
     <!-- <div class="col-version">Round Trip: <span id="id_round_trip">0</span>ms</div> -->
     <div class="col-version">Version: <span id="id_version">0.00</span></div>
    </div>
   </div>
   <div class="container">
    <h2>F3F-Task:</h2>
   </div>
   <div class="container">

    <div class="row">
     <div class="col-declaration-long">
      <label>Stop Task:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_stop_task" name="stop_task" value="true" disabled
      onclick="sendTimedNameValue(this.name, this.value); myF3XTask.stop(this)">STOP Task</button>
     </div>
     <div class="col-text">
      <p> stop a running task and reset all values</p>
     </div>

    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>F3F Task State:</label>
     </div>
     <div class="col-button">
      <label id="id_task_state"> waiting for F3X ABaseManager...</label> 
     </div>
     <div class="col-text">
      <p> task state description and final result after last line crossing</p>
     </div>
    </div>

    <div class="row">
     <div class="col-declaration-long">
      <label>F3F Leg Length:</label>
     </div>
     <div class="col-button">
      <label> <span id="id_leg_length">000</span>m</label> 
     </div>
     <div class="col-text">
      <p>Length of the used F3F leg length (80m-100m)</p>
     </div>
    </div>

    <div class="row">
     <div class="col-declaration-long">
      <label>F3F Task Time:</label>
     </div>
     <div class="col-button">
      <label id="id_task_time"> --:-- </label>
     </div>
     <div class="col-text">
      <p> F3F task frame time</p>
     </div>
    </div>

    <div class="row">
     <div class="col-declaration-long">
      <label>F3F in air time:</label>
     </div>
     <div class="col-button">
      <label id="id_inair_time"> --:-- </label>
     </div>
     <div class="col-text">
      <p> time between launch and entering the course (for more than 30s the course time will be started automatically)</p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Course Time:</label>
     </div>
     <div class="col-button">
      <label id="id_course_time"> --:-- </label>
     </div>
     <div class="col-text">
      <p> running / final  course time in s:ms</p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
      <label>Start F3F Task:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_start_task" name="start_task" value="true"
      onclick="sendNameValue(this.name, this.value); myF3XTask.start(this)">START Task</button>
     </div>
     <div class="col-text">
      <p> start F3F task and set new frame time</p>
     </div>
    </div>
<!-- next release
    <div class="row">
     <div class="col-declaration-long">
      <label>Loop F3F Task:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_loop_task" name="loop_task" value="true"
      onclick="sendNameValue(this.name, this.value); myF3XTask.start(this)">START Loop</button>
     </div>
     <div class="col-text">
      <p> start F3F task in a loop: finish of course = start task time of next model</p>
     </div>
    </div>
-->
    <div class="row">
     <div class="col-declaration-long">
      <label>Base-Line-A:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_signal_a" name="signal_a" value="true"
      onclick="sendTimedNameValue(this.name, this.value)">A-Line</button>
     </div>
     <div class="col-text">
      <p> Base line A crossed </p>
     </div>
    </div>
    <div class="row">
     <div class="col-declaration-long">
       <label>Base-Line-B:</label>
     </div>
     <div class="col-button">
      <button type="button" id="id_signal_b" name="signal_b" value="true"
      onclick="sendTimedNameValue(this.name, this.value)">B-Line</button>
     </div>
     <div class="col-text">
      <p> Base line B crossed </p>
     </div>
    </div>

    <div class="row">
     <div class="col-declaration-long">
      <label><span id="id_current_course_distance">000</span>m : Last-Leg:</label>
     </div>
     <div class="col-button">
      <label id="id_last_leg_time"> --:-- </label>
     </div>
     <div class="col-text">
      <p>Last leg time: total time / leg time / leg speed [ / dead time / dead distance] </p>
     </div>
    </div>
   </div>
   <hr>
   <div class="container">
      <button type="button" onclick="window.location.href='/'"> Main Menu</button>
   </div>
   <hr>
   <div class="container">
     <br><br><a href="https://github.com/Pulsar07/F3XCompetition">Link to project page at GitHub</a>
   </div>
  </div>
  
  <script>
   getData("initF3FTask");
   setInterval(function() {
     // Call a function repetatively with 2 Second interval
     getData("pollF3FTask");
   }, 1000); // 500mSeconds update rate

   setInterval(function() {
     // Call a function repetatively with 2 Second interval
     getDataInTaskstate("2", "id_running_f3f_time");
   }, 250); // 500mSeconds update rate

   var ourSendTime = 0;
   var ourDate = new Date();

   function sendTimedNameValue(aName, aValue) {
      console.log("sendTimedNameValue : " + aName + " : " + Date.now());
      sendNameValue(aName, aValue);
      getData("pollF3FTask");
      // console.log(Date.now());
   }
  </script>
 </body>
</html>
